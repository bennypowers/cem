:root {
  color-scheme: light dark;

  /* Core color primitives */
  --color-light: #ffffff;
  --color-dark: rgb(28, 28, 30);
  --color-haze: #f2f5f7;
  --color-bubble: rgb(36, 36, 38);

  // Theme-aware color system using light-dark()
  --color-bg: light-dark(var(--color-light), var(--color-dark));
  --color-text: light-dark(#141010, #eeeeee);
  --color-text-light: light-dark(#141010, #ffffff);
  --color-accent: light-dark(var(--color-haze), var(--color-bubble));
  --color-overlay: light-dark(var(--color-light), var(--color-bubble));
  --color-border: light-dark(#eeeeee, transparent);
  --color-theme: light-dark(#06f, #aecfff);
  --color-inline: light-dark(darkgoldenrod, #fbbf24);

  // Search-specific colors
  --color-search-bg: var(--color-accent);
  --color-search-border: light-dark(transparent, var(--color-accent));

  // Scrollbar colors
  --color-scroll-thumb: light-dark(rgba(0, 0, 0, 0.06), rgba(255, 255, 255, 0.06));

  // Shadow colors
  --color-shadow-subtle: light-dark(rgba(0, 0, 0, 0.07), rgba(0, 0, 0, 0.15));
  --color-shadow-light: light-dark(rgba(0, 0, 0, 0.17), rgba(0, 0, 0, 0.4));
  --color-shadow-medium: light-dark(rgba(0, 0, 0, 0.25), rgba(0, 0, 0, 0.5));
  --color-shadow-heavy: light-dark(rgba(0, 0, 0, 0.255), rgba(0, 0, 0, 0.6));
  --color-shadow-nav: light-dark(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.3));

  // Syntax highlighting colors
  --color-syntax-line-number: light-dark(rgba(0, 0, 0, 0.5), rgba(255, 255, 255, 0.5));
  --color-syntax-error: light-dark(#a61717, #ff6b6b);
  --color-syntax-keyword: light-dark(#1e8449, #6ab825);
  --color-syntax-name: light-dark(#1a73e8, #24909d);
  --color-syntax-name-alt: light-dark(#1a73e8, #447fcf);
  --color-syntax-string: light-dark(#e67e22, #ed9d13);
  --color-syntax-number: light-dark(#6f42c1, #3677a9);
  --color-syntax-comment: light-dark(#6c757d, #999999);
  --color-syntax-comment-special: light-dark(#dc3545, #e50808);
  --color-syntax-diff-removed: light-dark(#dc3545, #d22323);
  --color-syntax-diff-added: light-dark(#28a745, #589819);
  --color-text-muted: light-dark(#666666, #aaaaaa);

  // Typography
  --font-family: 'Metropolis', sans-serif;

  // Animation
  --timing-ease: ease;

  // Icons
  --icon-next: url(../images/icons/double-arrow.svg);
  --icon-never: url(../images/sitting.svg);
}

html {
 color-scheme: light dark;
  &[data-mode="dark"] {
    color-scheme: dark only;
    * { box-shadow: none !important; }
  }
  &[data-mode="light"] {
   color-scheme: light only;
  }
  &[data-mode="auto"] {
    @media (prefers-color-scheme: dark) {
      * { box-shadow: none !important; }
    }
  }
}

// Utility classes
.narrow {
  max-width: 750px;
  margin: 0 auto;
}

// Layout utilities
blockquote {
  + .highlight_wrap {
    margin-top: 2.25rem;
  }
}
