{{if .}}
<div slot="knobs" class="knobs-container">
  {{range $index, $group := .}}
  <details class="knob-group-instance" data-tag-name="{{$group.TagName}}" data-instance-index="{{$group.InstanceIndex}}" {{if $group.IsPrimary}}open{{end}}>
    <summary class="knob-group-instance-header">
      <span class="instance-tag">{{$group.TagName}}</span>: <span class="instance-label">{{$group.Label}}</span>
    </summary>
    {{with $group.Knobs}}
    <div class="knob-group-content">
      {{if .AttributeKnobs}}
      <section class="knob-group">
        <h4 class="knob-group-title">Attributes</h4>
        {{range .AttributeKnobs}}
        <cem-serve-knob-attribute name="{{.Name}}"
                                  type="{{.Type}}"
                                  value="{{.CurrentValue}}"
                                  {{if .Default}}default="{{.Default}}"{{end}}
                                  {{if .EnumValues}}enum-values="{{join .EnumValues ","}}"{{end}}>
          {{if .Description}}
          <div slot="description">{{.Description}}</div>
          {{end}}
        </cem-serve-knob-attribute>
        {{end}}
      </section>
      {{end}}

      {{if .PropertyKnobs}}
      <section class="knob-group">
        <h4 class="knob-group-title">Properties</h4>
        {{range .PropertyKnobs}}
        <cem-serve-knob-property name="{{.Name}}"
                                 type="{{.Type}}"
                                 value="{{.CurrentValue}}"
                                 {{if .Default}}default="{{.Default}}"{{end}}>
          {{if .Description}}
          <div slot="description">{{.Description}}</div>
          {{end}}
        </cem-serve-knob-property>
        {{end}}
      </section>
      {{end}}

      {{if .CSSPropertyKnobs}}
      <section class="knob-group">
        <h4 class="knob-group-title">CSS Custom Properties</h4>
        {{range .CSSPropertyKnobs}}
        <cem-serve-knob-css-property name="{{.Name}}"
                                     type="{{.Type}}"
                                     value="{{.CurrentValue}}"
                                     {{if .Default}}default="{{.Default}}"{{end}}>
          {{if .Description}}
          <div slot="description">{{.Description}}</div>
          {{end}}
        </cem-serve-knob-css-property>
        {{end}}
      </section>
      {{end}}
    </div>
    {{end}}
  </details>
  {{end}}
</div>
{{else}}
<p class="knobs-empty">No knobs available</p>
{{end}}
