{{if .}}
<cem-serve-knobs slot="knobs">
  {{range $index, $group := .}}
  <pf-v6-card class="knobs-panel"
              compact
              data-card="instance-{{$index}}"
              data-is-element-knob="true"
              data-label="{{$group.Label}}"
              data-tag-name="{{$group.TagName}}"
              data-instance-index="{{$group.InstanceIndex}}"
              {{if eq $index 0}}active{{end}}>
    <h3 slot="title">
      <span class="instance-tag">{{$group.TagName}}</span>: <span class="instance-label">{{$group.Label}}</span>
    </h3>
    {{with $group.Knobs}}
      {{if or .AttributeKnobs .PropertyKnobs .CSSPropertyKnobs}}
      <cem-serve-knob-group for="{{.ElementID}}">
        <pf-v6-form horizontal>
          {{if .AttributeKnobs}}
          <h3 class="knob-section-title">Attributes</h3>
          {{range .AttributeKnobs}}
          <pf-v6-form-group>
            <pf-v6-form-label slot="label">{{.Name}}</pf-v6-form-label>

            {{if .Description}}
              {{if eq .Type "boolean"}}
              <pf-v6-switch slot="control"
                            data-knob-type="attribute"
                            data-knob-name="{{.Name}}"
                            {{if eq .CurrentValue "true"}}checked{{end}}>
              </pf-v6-switch>

              {{else if eq .Type "enum"}}
              <pf-v6-select slot="control"
                            data-knob-type="attribute"
                            data-knob-name="{{.Name}}"
                            value="{{.CurrentValue}}">
                {{range .EnumValues}}
                <option value="{{.}}">{{.}}</option>
                {{end}}
              </pf-v6-select>

              {{else if eq .Type "number"}}
              <pf-v6-text-input slot="control"
                                type="number"
                                data-knob-type="attribute"
                                data-knob-name="{{.Name}}"
                                value="{{.CurrentValue}}">
              </pf-v6-text-input>

              {{else if eq .Type "color"}}
              <pf-v6-text-input-group slot="control"
                                      type="text"
                                      data-knob-type="attribute"
                                      data-knob-name="{{.Name}}"
                                      value="{{.CurrentValue}}">
                <pf-v6-button slot="utilities"
                              variant="plain"
                              aria-label="Pick color for {{.Name}}"
                              class="color-picker-button"
                              data-color-input="{{.Name}}">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true">
                    <path d="M13.354.646a1.207 1.207 0 0 0-1.708 0L8.5 3.793l-.646-.647a.5.5 0 1 0-.708.708L8.293 5l-7.147 7.146A.5.5 0 0 0 1 12.5v1.793l-.854.853a.5.5 0 1 0 .708.707L1.707 15H3.5a.5.5 0 0 0 .354-.146L11 7.707l1.146 1.147a.5.5 0 0 0 .708-.708l-.647-.646 3.147-3.146a1.207 1.207 0 0 0 0-1.708l-2-2zM2 12.707l7-7L10.293 7l-7 7H2v-1.293z"/>
                  </svg>
                </pf-v6-button>
              </pf-v6-text-input-group>

              {{else}}
              <pf-v6-text-input slot="control"
                                data-knob-type="attribute"
                                data-knob-name="{{.Name}}"
                                value="{{.CurrentValue}}">
              </pf-v6-text-input>
              {{end}}

              <pf-v6-popover slot="control">
                <pf-v6-button slot="trigger" variant="plain" aria-label="More information about {{.Name}}">
                  <svg class="pf-v6-svg" viewBox="0 0 512 512" fill="currentColor" aria-hidden="true" role="img" width="1em" height="1em">
                    <path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"></path>
                  </svg>
                </pf-v6-button>
                {{.Description}}
              </pf-v6-popover>

            {{else}}
            {{if eq .Type "boolean"}}
            <pf-v6-switch slot="control"
                          data-knob-type="attribute"
                          data-knob-name="{{.Name}}"
                          {{if eq .CurrentValue "true"}}checked{{end}}>
            </pf-v6-switch>

            {{else if eq .Type "enum"}}
            <pf-v6-select slot="control"
                          data-knob-type="attribute"
                          data-knob-name="{{.Name}}"
                          value="{{.CurrentValue}}">
              {{range .EnumValues}}
              <option value="{{.}}">{{.}}</option>
              {{end}}
            </pf-v6-select>

            {{else if eq .Type "number"}}
            <pf-v6-text-input slot="control"
                              type="number"
                              data-knob-type="attribute"
                              data-knob-name="{{.Name}}"
                              value="{{.CurrentValue}}">
            </pf-v6-text-input>

            {{else if eq .Type "color"}}
            <pf-v6-text-input-group slot="control"
                                    type="text"
                                    data-knob-type="attribute"
                                    data-knob-name="{{.Name}}"
                                    value="{{.CurrentValue}}">
              <pf-v6-button slot="utilities"
                            variant="plain"
                            aria-label="Pick color for {{.Name}}"
                            class="color-picker-button"
                            data-color-input="{{.Name}}">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true">
                  <path d="M13.354.646a1.207 1.207 0 0 0-1.708 0L8.5 3.793l-.646-.647a.5.5 0 1 0-.708.708L8.293 5l-7.147 7.146A.5.5 0 0 0 1 12.5v1.793l-.854.853a.5.5 0 1 0 .708.707L1.707 15H3.5a.5.5 0 0 0 .354-.146L11 7.707l1.146 1.147a.5.5 0 0 0 .708-.708l-.647-.646 3.147-3.146a1.207 1.207 0 0 0 0-1.708l-2-2zM2 12.707l7-7L10.293 7l-7 7H2v-1.293z"/>
                </svg>
              </pf-v6-button>
            </pf-v6-text-input-group>

            {{else}}
            <pf-v6-text-input slot="control"
                              data-knob-type="attribute"
                              data-knob-name="{{.Name}}"
                              value="{{.CurrentValue}}">
            </pf-v6-text-input>
            {{end}}
            {{end}}

            {{if .Summary}}
            <span slot="helper">{{.Summary}}</span>
            {{end}}
          </pf-v6-form-group>
          {{end}}
          {{end}}

          {{if .PropertyKnobs}}
          <h3 class="knob-section-title">Properties</h3>
          {{range .PropertyKnobs}}
          <pf-v6-form-group>
            <pf-v6-form-label slot="label">{{.Name}}</pf-v6-form-label>

            {{if .Description}}
              {{if eq .Type "boolean"}}
              <pf-v6-switch slot="control"
                            data-knob-type="property"
                            data-knob-name="{{.Name}}"
                            {{if eq .CurrentValue "true"}}checked{{end}}>
              </pf-v6-switch>

              {{else if eq .Type "enum"}}
              <pf-v6-select slot="control"
                            data-knob-type="property"
                            data-knob-name="{{.Name}}"
                            value="{{.CurrentValue}}">
                {{range .EnumValues}}
                <option value="{{.}}">{{.}}</option>
                {{end}}
              </pf-v6-select>

              {{else if eq .Type "number"}}
              <pf-v6-text-input slot="control"
                                type="number"
                                data-knob-type="property"
                                data-knob-name="{{.Name}}"
                                value="{{.CurrentValue}}">
              </pf-v6-text-input>

              {{else}}
              <pf-v6-text-input slot="control"
                                data-knob-type="property"
                                data-knob-name="{{.Name}}"
                                value="{{.CurrentValue}}">
              </pf-v6-text-input>
              {{end}}

              <pf-v6-popover slot="control">
                <pf-v6-button slot="trigger" variant="plain" aria-label="More information about {{.Name}}">
                  <svg class="pf-v6-svg" viewBox="0 0 512 512" fill="currentColor" aria-hidden="true" role="img" width="1em" height="1em">
                    <path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"></path>
                  </svg>
                </pf-v6-button>
                {{.Description}}
              </pf-v6-popover>

            {{else}}
            {{if eq .Type "boolean"}}
            <pf-v6-switch slot="control"
                          data-knob-type="property"
                          data-knob-name="{{.Name}}"
                          {{if eq .CurrentValue "true"}}checked{{end}}>
            </pf-v6-switch>

            {{else if eq .Type "enum"}}
            <pf-v6-select slot="control"
                          data-knob-type="property"
                          data-knob-name="{{.Name}}"
                          value="{{.CurrentValue}}">
              {{range .EnumValues}}
              <option value="{{.}}">{{.}}</option>
              {{end}}
            </pf-v6-select>

            {{else if eq .Type "number"}}
            <pf-v6-text-input slot="control"
                              type="number"
                              data-knob-type="property"
                              data-knob-name="{{.Name}}"
                              value="{{.CurrentValue}}">
            </pf-v6-text-input>

            {{else}}
            <pf-v6-text-input slot="control"
                              data-knob-type="property"
                              data-knob-name="{{.Name}}"
                              value="{{.CurrentValue}}">
            </pf-v6-text-input>
            {{end}}
            {{end}}

            {{if .Summary}}
            <span slot="helper">{{.Summary}}</span>
            {{end}}
          </pf-v6-form-group>
          {{end}}
          {{end}}

          {{if .CSSPropertyKnobs}}
          <h3 class="knob-section-title">CSS Custom Properties</h3>
          {{range .CSSPropertyKnobs}}
          <pf-v6-form-group>
            <pf-v6-form-label slot="label">{{.Name}}</pf-v6-form-label>

            {{if .Description}}
              {{if eq .Type "color"}}
              <pf-v6-text-input-group slot="control"
                                      type="text"
                                      data-knob-type="css-property"
                                      data-knob-name="{{.Name}}"
                                      value="{{.CurrentValue}}">
                <pf-v6-button slot="utilities"
                              variant="plain"
                              aria-label="Pick color for {{.Name}}"
                              class="color-picker-button"
                              data-color-input="{{.Name}}">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true">
                    <path d="M13.354.646a1.207 1.207 0 0 0-1.708 0L8.5 3.793l-.646-.647a.5.5 0 1 0-.708.708L8.293 5l-7.147 7.146A.5.5 0 0 0 1 12.5v1.793l-.854.853a.5.5 0 1 0 .708.707L1.707 15H3.5a.5.5 0 0 0 .354-.146L11 7.707l1.146 1.147a.5.5 0 0 0 .708-.708l-.647-.646 3.147-3.146a1.207 1.207 0 0 0 0-1.708l-2-2zM2 12.707l7-7L10.293 7l-7 7H2v-1.293z"/>
                  </svg>
                </pf-v6-button>
              </pf-v6-text-input-group>

              {{else}}
              <pf-v6-text-input slot="control"
                                data-knob-type="css-property"
                                data-knob-name="{{.Name}}"
                                value="{{.CurrentValue}}">
              </pf-v6-text-input>
              {{end}}

              <pf-v6-popover slot="control">
                <pf-v6-button slot="trigger" variant="plain" aria-label="More information about {{.Name}}">
                  <svg class="pf-v6-svg" viewBox="0 0 512 512" fill="currentColor" aria-hidden="true" role="img" width="1em" height="1em">
                    <path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"></path>
                  </svg>
                </pf-v6-button>
                {{.Description}}
              </pf-v6-popover>

            {{else}}
            {{if eq .Type "color"}}
            <pf-v6-text-input-group slot="control"
                                    type="text"
                                    data-knob-type="css-property"
                                    data-knob-name="{{.Name}}"
                                    value="{{.CurrentValue}}">
              <pf-v6-button slot="utilities"
                            variant="plain"
                            aria-label="Pick color for {{.Name}}"
                            class="color-picker-button"
                            data-color-input="{{.Name}}">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true">
                  <path d="M13.354.646a1.207 1.207 0 0 0-1.708 0L8.5 3.793l-.646-.647a.5.5 0 1 0-.708.708L8.293 5l-7.147 7.146A.5.5 0 0 0 1 12.5v1.793l-.854.853a.5.5 0 1 0 .708.707L1.707 15H3.5a.5.5 0 0 0 .354-.146L11 7.707l1.146 1.147a.5.5 0 0 0 .708-.708l-.647-.646 3.147-3.146a1.207 1.207 0 0 0 0-1.708l-2-2zM2 12.707l7-7L10.293 7l-7 7H2v-1.293z"/>
                </svg>
              </pf-v6-button>
            </pf-v6-text-input-group>

            {{else}}
            <pf-v6-text-input slot="control"
                              data-knob-type="css-property"
                              data-knob-name="{{.Name}}"
                              value="{{.CurrentValue}}">
            </pf-v6-text-input>
            {{end}}
            {{end}}

            {{if .Summary}}
            <span slot="helper">{{.Summary}}</span>
            {{end}}
          </pf-v6-form-group>
          {{end}}
          {{end}}
        </pf-v6-form>
      </cem-serve-knob-group>
      {{end}}
    {{end}}
  </pf-v6-card>
  {{end}}
</cem-serve-knobs>
{{else}}
<p slot="knobs" class="knobs-empty">No knobs available</p>
{{end}}
